{% extends "bootstrap/base.html" %}
{% block title %}
	Data
{% endblock %}
{% block styles %}
	{{super()}}
	<link rel="stylesheet" href="{{url_for('static', filename='dashboard.css')}}">
	<link rel="stylesheet" href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css">
{% endblock %}
{% block content %}
	{% include 'includes/_navbar_top.html' %}
    <div class="col-md-12">
        {#			<h1 class="page-header">Table: {{ dataset_info.name }}</h1>#}
        <form method=post>
            <table id="user_table" class="display" cellspacing="0"
                   width="100%">
                <thead>
                <tr>
                    <th></th>
                    {% for cname in cnames %}
                        <th>{{ cname[0] }}</th>
                    {% endfor %}
                </tr>
                </thead>
                <tbody></tbody>
            </table>
	        <a class="btn btn-lg btn-info pull-left project-action" href="{{ url_for('view_bp.history', dataset=dataset_info.id) }}">View History</a>
{#            				<input onclick="this.form.action='{{url_for('data_bp.delete', id=dataset_info.id)}}'; this.form.submit()" class="btn btn-primary float-right" value="Delete">#}
        </form>
    </div>
    <div class="col-md-12">
    TEST
    </div>
{% endblock %}
{% block scripts %}
	{{ super() }}
	<script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
	<script type="text/javascript" charset="utf-8">
		$(document).ready(function (){
		    var table = $('#user_table').DataTable({
                'sDom': '<"H"lpr>t<i"F">',
			    'processing': true,
			    'serverSide': true,
			    'ajax': "{{ url_for('view_bp.retrieve', sql_table_name=dataset_info.working_copy) }}",
			    'columnDefs': [{
			        'targets': 0,
				    'searchable': false,
				    'orderable': false,
				    'className': 'dt-body-center',
				    'render': function (data, type, full, meta){
			            return '<input type="checkbox" name="data_id[]" value="' + $('<div/>').text(data).html() + '">';
			        }
			    }],
			    'order': [[1, 'asc']]
		    });
		});
		</script>
{% endblock %}
