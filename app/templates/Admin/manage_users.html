{% extends "bootstrap/base.html" %}
{% import "bootstrap/wtf.html" as wtf %}
{% block title %}
	Manage Users
{% endblock %}
{% block styles %}
	{{ super() }}
	<link rel="stylesheet" href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css">
	<link rel="stylesheet" href="{{url_for('static', filename='css/_navbar_top.css')}}">
{% endblock %}
{% block content %}
	{% include 'includes/_navbar_top.html' %}
	<div class="row">
		<div class="container">
			<form method=post>
				<table id="user_table" class="display" cellspacing="0" width="100%">
					<thead>
					<tr>
						<th></th>
						<th>First Name</th>
						<th>Last Name</th>
						<th>Organization</th>
						<th>Email</th>
						<th>Username</th>
						<th>Admin Rights</th>
						<th>Disabled</th>
					</tr>
					</thead>
					<tbody></tbody>
				</table>
				<button type="submit" class="btn btn-danger" name="button" value="delete">Delete</button>
				<button type="submit" class="btn btn-info" name="button" value="admin">Toggle admin</button>
				<button type="submit" class="btn btn-info" name="button" value="disabled">Toggle disabled</button>
			</form>
		</div>
	</div>
{% endblock %}
{% block scripts %}
	{{ super() }}
	<script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
	<script type="text/javascript" charset="utf-8">
		$(document).ready(function (){
		    var table = $('#user_table').DataTable({
			    'processing': true,
			    'serverSide': true,
			    'ajax': "{{ url_for('admin_bp.data') }}",
			    'columnDefs': [{
			        'targets': 0,
				    'searchable': false,
				    'orderable': false,
				    'className': 'dt-body-center',
				    'render': function (data, type, full, meta){
			            return '<input type="checkbox" name="user_id[]" value="' + $('<div/>').text(data).html() + '">';
			        }
			    }],
			    'order': [[1, 'asc']]
		    });
		});
		</script>
{% endblock %}
