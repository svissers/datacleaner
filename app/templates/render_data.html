{% extends "bootstrap/base.html" %}

{% block title %}
Dashboard
{% endblock %}

{% block styles %}
{{super()}}
<link rel="stylesheet" href="{{url_for('static', filename='dashboard.css')}}">
{% endblock %}

{% block content %}
{% include 'includes/_navbar_top.html' %}

<div class="container-fluid">
  <div class="row">
    <div class="col-md-12">
      <h1 class="page-header">Table: {{ dataset_info.name }}</h1>
        <table class="table table-striped table-condensed">
          <thead>
            <tr>
              {% for cname in cnames %}
              <th>{{ cname }}</th>
              {% endfor %}
            </tr>
          </thead>
          <tbody>
            {% for row in data.items %}
            <tr>
              {% for element in row %}
              <td>{{ element }}</td>
              {% endfor %}
            </tr>
            {% endfor %}
          </tbody>
        </table>
    </div>
  </div>
  <div class="row">
    <nav aria-label="Page navigation">
        <div>
            Results per page
            <form action='{{url_for(request.endpoint)}}'>
                <select name=resultsperpage onchange="this.form.submit()">
                    {% for i in [10,25,50,100] %}
                    <option {% if i == resultsperpage %} selected {% endif %} value="{{i}}">{{i}}</option>
                    {% endfor %}
                </select>
                <input hidden name=dataset value={{dataset_info.id}}>
                <input hidden name=page value=1>
            </form>
        </div>
      <ul class="pagination">
        {% for i in range(1,data.pages+1) %}
        {% if i == data.page %}
        <li class="active"><a href="#">{{ i }}</a></li>
        {% else %}
        <li><a href="{{ url_for(request.endpoint, dataset=dataset_info.id, page=i, resultsperpage=resultsperpage) }}">{{ i }}</a></li>
        {% endif %}
        {% endfor %}
      </ul>
    </nav>
  </div>
</div>
{% endblock %}
